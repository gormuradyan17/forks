(function(e){function t(t){for(var a,s,i=t[0],c=t[1],u=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(f.length)f.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},o={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},5596:function(e,t,r){"use strict";r("5f96")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-card",{attrs:{height:"80px"}},[r("v-app-bar",{attrs:{absolute:"",color:"blue",height:"80px",dark:"","shrink-on-scroll":"","scroll-target":"#scrolling-techniques-2"}},[r("v-spacer"),e.searchActive?r("v-text-field",{attrs:{label:"Search",outlined:"",error:e.pathError,clearable:""},on:{input:e.checkHandler},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),r("v-btn",{attrs:{icon:"",disabled:e.dis},on:{click:e.searchHandler}},[r("v-icon",[e._v("search")])],1),r("router-link",{attrs:{to:"/favorite"}},[r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("favorite")])],1)],1)],1)],1),r("v-main",[r("v-container",{attrs:{fluid:""}},[r("Modal"),r("router-view")],1)],1),r("v-footer",{attrs:{app:""}})],1)},n=[],s=r("1da1"),i=(r("96cf"),r("841c"),r("ac1f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"290","retain-focus":!1},model:{value:e.$store.state.dialog,callback:function(t){e.$set(e.$store.state,"dialog",t)},expression:"$store.state.dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$store.state.dialogMessage)+" ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.handlerClose}},[e._v(" ok ")])],1)],1)],1)}),c=[],u={props:["dialog"],methods:{handlerClose:function(){this.$store.commit("UPDATE_DIALOG",{dialog:!1,dialogMessage:""})}}},l=u,d=r("2877"),f=Object(d["a"])(l,i,c,!1,null,null,null),p=f.exports,g={name:"App",components:{Modal:p},data:function(){return{searchActive:!0,pathError:!1,search:"",dis:!0}},methods:{handleOpenSearch:function(){this.searchActive=!this.searchActive},checkHandler:function(){this.pathError=!0;var e=/\w+\/\w+/g;0===this.search.search(e)&&(this.pathError=!1,this.dis=!1)},searchHandler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("forksModule/getForks",{search:e.search,page:1});case 2:return t.next=4,e.$router.push({name:"Search",query:{page:1,repository:e.$store.state.forksModule.search}});case 4:case"end":return t.stop()}}),t)})))()}},created:function(){}},h=g,v=Object(d["a"])(h,o,n,!1,null,null,null),m=v.exports,_=r("8c4f"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"})},k=[],x={methods:{},created:function(){console.log("home")}},y=x,w=(r("cccb"),Object(d["a"])(y,b,k,!1,null,null,null)),$=w.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ForksList")],1)},M=[],S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-header":!1,"hide-default-footer":!1,items:e.$store.state.forksModule.forks,"items-per-page":1,page:e.$store.state.forksModule.page},on:{pagination:e.paginationHandler},scopedSlots:e._u([{key:"body",fn:function(t){return[r("tbody",e._l(t.items,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.full_name))]),r("td",[e._v(" "+e._s(t.owner.login))]),r("td",[r("v-rating",{attrs:{"background-color":"orange lighten-3",color:"orange",large:""},model:{value:t.stargazers_count,callback:function(r){e.$set(t,"stargazers_count",r)},expression:"item.stargazers_count"}})],1),r("td",[r("a",{attrs:{href:t.html_url,target:"_blank"}},[e._v(e._s(t.html_url))])]),r("td",[r("v-icon",{ref:"favorite",refInFor:!0,attrs:{item:t},on:{click:e.followHandler}},[e._v("favorite")])],1)])})),0)]}},{key:"top",fn:function(t){var a=t.pagination,o=t.options,n=t.updateOptions;return[r("v-data-footer",{attrs:{pagination:a,options:o,"items-per-page-text":"$vuetify.dataTable.itemsPerPageText"},on:{"update:options":n}},[e._v(" "+e._s(a)+" "+e._s(o)+" "+e._s(n)+" ")])]}},{key:"footer.page-text",fn:function(t){return[e._v(" "+e._s(t.pageStart)+"-"+e._s(t.pageStop)+" of ~"+e._s(t.itemsLength)+" ")]}}])}),r("Modal")],1)},E=[],A={components:{Modal:p},data:function(){return{dialog:!0,pagination:{},options:{},userId:1,updateOptions:{},headers:[{text:"#",align:"start",sortable:!1,value:"name"},{text:"полное название репозитория",align:"start",sortable:!1,value:"name"},{text:"владелец",align:"start",sortable:!1,value:"name"},{text:" количестов звезд",align:"start",sortable:!1,value:"name"},{text:"ссылка на репозиторий форка",align:"start",sortable:!1,value:"name"},{text:"закладки",align:"start",sortable:!1,value:"name"}]}},methods:{paginationHandler:function(e){this.$route.query.page!==e.page&&this.$store.state.forksModule.page!==e.page&&(this.$store.commit("forksModule/UPDATE_PAGE",{page:e.page}),this.$router.push({name:"Search",query:{page:e.page,repository:this.$route.query.repository}}))},followHandler:function(){var e=this,t=this.$refs["favorite"][0].$attrs.item;if(localStorage.getItem("favorite_id")){var r={forks_id:t.id,owner:t.owner.login,full_name:t.full_name,stargazers_count:t.stargazers_count,html_url:t.html_url};this.$store.dispatch("favoriteModule/getFavoriteById",JSON.parse(localStorage.getItem("favorite_id"))).then((function(a){a.user.favoriteForks.some((function(e){return e.forks_id===t.id}))||a.user.favoriteForks.push(r),e.$store.dispatch("favoriteModule/updatedFavorite",{userData:a}).then((function(){e.$store.commit("UPDATE_DIALOG",{dialog:!0,dialogMessage:"Успешно добавлен"})}))}))}else{var a={user:{id:this.userId,favoriteForks:[{forks_id:t.id,owner:t.owner.login,full_name:t.full_name,stargazers_count:t.stargazers_count,html_url:t.html_url}]}};this.$store.dispatch("favoriteModule/createFavorite",a).then((function(){e.$store.commit("UPDATE_DIALOG",{dialog:!0,dialogMessage:"Успешно добавлен"})}))}}},computed:{},created:function(){}},P=A,j=(r("5596"),Object(d["a"])(P,S,E,!1,null,null,null)),I=j.exports,F={components:{ForksList:I},methods:{},created:function(){},mounted:function(){if(this.$route.query.repository){var e=this.$route.query.page?parseInt(this.$route.query.page):this.$store.state.forksModule.page;this.$store.dispatch("forksModule/getForks",{search:this.$route.query.repository,page:e}).then((function(){}))}else this.$router.push({name:"Home"})}},T=F,D=Object(d["a"])(T,O,M,!1,null,null,null),R=D.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"80%"}},[r("v-container",[r("v-row",{attrs:{dense:""}},e._l(e.favorites,(function(t,a){return r("v-col",{key:a,attrs:{cols:"12"}},[r("v-card",[r("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[r("div",[r("v-card-title",{staticClass:"headline",domProps:{textContent:e._s(t.owner)}}),r("v-card-subtitle",{domProps:{textContent:e._s(t.full_name)}}),r("v-card-text",[r("v-rating",{attrs:{"background-color":"orange lighten-3",color:"orange",large:""},model:{value:t.stargazers_count,callback:function(r){e.$set(t,"stargazers_count",r)},expression:"item.stargazers_count"}})],1),r("v-card-actions",[r("a",{attrs:{href:t.html_url,target:"_blank"}},[e._v(e._s(t.html_url))])])],1)])])],1)})),1)],1)],1)},z=[],C={data:function(){return{favorites:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!localStorage.getItem("favorite_id")){t.next=4;break}return t.next=3,e.$store.dispatch("favoriteModule/getFavoriteById",JSON.parse(localStorage.getItem("favorite_id")));case 3:e.favorites=e.$store.state.favoriteModule.favorites.user.favoriteForks;case 4:case"end":return t.stop()}}),t)})))()}},G=C,L=Object(d["a"])(G,U,z,!1,null,null,null),H=L.exports;a["default"].use(_["a"]);var q=[{path:"/",name:"Home",component:$},{path:"/favorite",name:"Favorite",component:H},{path:"/search/:page?/:repository?",name:"Search",component:R}],J=new _["a"]({mode:"history",base:"/",routes:q}),B=J,K=r("ce5b"),N=r.n(K);r("bf40");a["default"].use(N.a);var V={theme:{light:{primary:"#3f51b5",secondary:"#b0bec5",accent:"#8c9eff",error:"#e61e2b"}}},Y=new N.a(V),X=r("bc3a"),Z=r.n(X),Q=Z.a,W={install:function(e){e.prototype.$axios=Z.a}},ee=r("2f62"),te={forksUrl:"https://api.github.com/repos/"},re=te,ae={forks:[],forksUrl:re.forksUrl,search:"",page:1},oe=ae,ne={UPDATE_FORKS:function(e,t){e.search=t.search,e.forks=t.data?t.data:[]},UPDATE_PAGE:function(e,t){e.page=t.page}},se=ne,ie={getForks:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var o,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e.commit,n=e.state,s=t.search,i=t.page,a.prev=2,console.log(s,i,o),a.next=6,r.$axios.get(n.forksUrl+"".concat(s,"/forks")).then((function(e){console.log(e),o("UPDATE_FORKS",{data:e.data,search:s}),o("UPDATE_PAGE",{page:i})})).catch((function(e){o("UPDATE_DIALOG",{dialog:!0,dialogMessage:e.message},{root:!0})}));case 6:a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](2);case 10:case"end":return a.stop()}}),a,null,[[2,8]])})))()}},ce=ie,ue={getPage:function(e){return e.page},getSearch:function(e){return e.search}},le={namespaced:!0,state:oe,mutations:se,actions:ce,getters:ue},de={favorites:[]},fe=de,pe={GET_FAVORITES:function(e,t){e.favorites=t}},ge=pe,he=r("5530"),ve=r("260b"),me={createFavorite:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.commit,o=e.state,r.prev=1,console.log(a,o),localStorage.getItem("favorite_id")){r.next=8;break}return r.next=6,ve["a"].database().ref("/favorites").push(t);case 6:n=r.sent,localStorage.setItem("favorite_id",JSON.stringify(n.key));case 8:r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](1),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},updatedFavorite:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,o=e.state,n=t.userData,console.log(a,o),r.next=5,ve["a"].database().ref("/favorites").child(n.id).update(n);case 5:case"end":return r.stop()}}),r)})))()},getFavoriteById:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,o=e.state,r.prev=1,console.log(a),console.log(o),r.next=6,ve["a"].database().ref("/favorites").child(t).once("value");case 6:if(r.t0=r.sent.val(),r.t0){r.next=9;break}r.t0={};case 9:return n=r.t0,a("GET_FAVORITES",n),r.abrupt("return",Object(he["a"])(Object(he["a"])({},n),{},{id:t}));case 14:r.prev=14,r.t1=r["catch"](1),console.log(r.t1);case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()}},_e=me,be={},ke={namespaced:!0,state:fe,mutations:ge,actions:_e,getters:be};a["default"].use(ee["a"]);var xe=function(e){e.$axios=Q},ye=new ee["a"].Store({state:{dialog:!1,dialogMessage:""},mutations:{UPDATE_DIALOG:function(e,t){e.dialog=t.dialog,e.dialogMessage=t.dialogMessage}},actions:{},modules:{forksModule:le,favoriteModule:ke},plugins:[xe]});r("66ce");a["default"].use(W),a["default"].config.productionTip=!1,ve["a"].initializeApp({apiKey:"AIzaSyCY2B428Eb1dhCUz31JLuTVZ9FucUYoaGg",authDomain:"vue-forks-d0ec6.firebaseapp.com",databaseURL:"https://vue-forks-d0ec6-default-rtdb.firebaseio.com",projectId:"vue-forks-d0ec6",storageBucket:"vue-forks-d0ec6.appspot.com",messagingSenderId:"163888220192",appId:"1:163888220192:web:0381779c30ab65442a5445",measurementId:"G-7KPLX6R2FN"}),new a["default"]({router:B,vuetify:Y,store:ye,firebase:ve["a"],render:function(e){return e(m)}}).$mount("#app")},"5ced":function(e,t,r){},"5f96":function(e,t,r){},cccb:function(e,t,r){"use strict";r("5ced")}});
//# sourceMappingURL=app.0c9cb317.js.map